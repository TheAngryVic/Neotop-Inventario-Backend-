"use strict";(self["webpackChunkfront_inventario"]=self["webpackChunkfront_inventario"]||[]).push([[190],{2190:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var o=t(3673);const n=(0,o._)("div",{class:"row justify-center"},[(0,o._)("h3",null,"Productos")],-1),r={class:"row xs-12 md-9 justify-center"};function s(e,a,t,s,l,i){const c=(0,o.up)("tabla"),p=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(p,{class:"q-p2"},{default:(0,o.w5)((()=>[n,(0,o._)("div",r,[(0,o.Wm)(c,{cols:l.cols,tittle:"Listado de productos"},null,8,["cols"])])])),_:1})}var l=t(1959),i=t(5474),c=t(2323);const p={class:"full-width row flex-center text-accent q-gutter-sm"};function d(e,a,t,n,r,s){const l=(0,o.up)("q-icon"),i=(0,o.up)("q-input"),d=(0,o.up)("q-td"),g=(0,o.up)("q-tr"),u=(0,o.up)("q-table");return(0,o.wg)(),(0,o.j4)(u,{columns:t.cols,filter:n.filter,loading:n.loading,"rows-per-page-options":[5,8,10],rows:n.inventario,title:t.tittle,onRequest:n.onRequest,"card-class":"bg-red-1 text-grey-9",class:"q-mt-xl",color:"primary","row-key":"id","rows-per-page-label":"Filas por pÃ¡gina",pagination:n.pagination,"onUpdate:pagination":a[1]||(a[1]=e=>n.pagination=e),"binary-state-sort":""},{"top-right":(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:n.filter,"onUpdate:modelValue":a[0]||(a[0]=e=>n.filter=e),rounded:"",outlined:"",debounce:"300",placeholder:"buscador","bg-color":"white"},{append:(0,o.w5)((()=>[(0,o.Wm)(l,{name:"las la-search"})])),_:1},8,["modelValue"])])),body:(0,o.w5)((e=>[(0,o.Wm)(g,{props:e,class:(0,c.C_)(e.row.Cantidad>=e.row.Modelo.stock_minimo?"bg-green-7":"bg-red-6")},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{key:"Modelo",props:e,class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,c.zw)(e.row.Modelo.nombre),1)])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"Bodega",props:e,class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,c.zw)(e.row.Bodega.nombre),1)])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"Cantidad",props:e,class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,c.zw)(e.row.Cantidad),1)])),_:2},1032,["props"])])),_:2},1032,["props","class"])])),"no-data":(0,o.w5)((({message:e,filter:a})=>[(0,o._)("div",p,[(0,o.Wm)(l,{size:"2em",name:"las la-meh"}),(0,o._)("span",null," Lamentablemente... "+(0,c.zw)(e),1),(0,o.Wm)(l,{size:"2em",name:a?"las la-frown":"las la-exclamation-triangle"},null,8,["name"])])])),_:1},8,["columns","filter","loading","rows","title","onRequest","pagination"])}t(71);const g={props:{tittle:String,cols:Array},setup(e){const a=(0,o.f3)("inventarioArray"),t=(0,l.iH)({}),n=(0,l.iH)(""),r=(0,l.iH)(!1),s=(0,l.iH)({page:1,rowsPerPage:1,rowsNumber:1,sortBy:"Modelo",descending:!1}),c=async(e=0)=>{try{let e;const a={headers:{"x-token":localStorage.token},params:{pageSize:5}};await i.api.get("/productos/inventario",a).then((e=>{const{meta:a,rows:t}=e.data;console.log(a),s.value.page=a.currentPage,s.value.rowsPerPage=a.pageSize,s.value.rowsNumber=a.count})).catch((e=>console.log(e.response)));return e}catch(a){console.log("Error en get",a)}};c();const p=async(e=0,t=5,o,n,l)=>{try{const c={headers:{"x-token":localStorage.token},params:{currentPage:e,pageSize:t}},p={headers:{"x-token":localStorage.token},params:{currentPage:e,pageSize:t,filter:o}},d={headers:{"x-token":localStorage.token},params:{currentPage:e,pageSize:t,sorter:n,desc:l}};let g;g=""!==o?await i.api.get("/productos/inventario",p):n?await i.api.get("/productos/inventario",d):await i.api.get("/productos/inventario",c);const{currentPage:u,pageSize:m,count:w}=g.data.meta,f=g.data.rows;a.value.splice(0,w,...f),s.value.page=u,s.value.rowsPerPage=m,s.value.rowsNumber=w,s.value.sortBy=n,s.value.descending=l,setInterval((()=>{r.value=!1}),1e3)}catch(c){console.log(c)}};function d(e){r.value=!0;let a=e.filter.toUpperCase();p(e.pagination.page,e.pagination.rowsPerPage,a,e.pagination.sortBy,e.pagination.descending)}return{inventario:a,filter:n,loading:r,objeto:t,onRequest:d,pagination:s}}};var u=t(4260),m=t(6429),w=t(4842),f=t(4554),b=t(8186),v=t(3884),h=t(7518),y=t.n(h);const k=(0,u.Z)(g,[["render",d]]),P=k;y()(g,"components",{QTable:m.Z,QInput:w.Z,QIcon:f.Z,QTr:b.Z,QTd:v.Z});const _=[{name:"Modelo",label:"Modelo",field:e=>e.Modelo.nombre,align:"left",sortable:!0},{name:"Bodega",label:"Bodega",field:e=>e.Bodega.nombre,align:"left",sortable:!0},{name:"Cantidad",label:"Cantidad",field:"Cantidad",align:"right",sortable:!0}],x={components:{tabla:P},data(){const e=(0,l.iH)(!1);(0,o.JJ)("isVisibleAgregar",e);const a=(0,l.iH)([]),t=async(e=1)=>{try{const t={headers:{"x-token":localStorage.token},params:{pageSize:5,currentPage:e}};await i.api.get("/productos/inventario",t).then((e=>{const{meta:t,rows:o}=e.data;a.value=o})).catch((e=>console.log(e.response)))}catch(t){console.log("Error en get",t)}};return t(),(0,o.JJ)("inventarioArray",a),{cols:_,inventarioArray:a,isVisibleAgregar:e}}};var q=t(4379);const z=(0,u.Z)(x,[["render",s]]),S=z;y()(x,"components",{QPage:q.Z})}}]);