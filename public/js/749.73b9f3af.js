"use strict";(self["webpackChunkfront_inventario"]=self["webpackChunkfront_inventario"]||[]).push([[749],{4749:(e,a,t)=>{t.r(a),t.d(a,{default:()=>q});var o=t(3673);const n=(0,o._)("div",{class:"row justify-center"},[(0,o._)("h3",null,"Movimientos de productos")],-1),l={class:"row xs-12 md-9 justify-center"};function r(e,a,t,r,i,s){const c=(0,o.up)("tabla"),g=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(g,{class:"q-p2"},{default:(0,o.w5)((()=>[n,(0,o._)("div",l,[(0,o.Wm)(c,{cols:i.cols,tittle:"Listado de productos"},null,8,["cols"])])])),_:1})}var i=t(1959),s=t(5474),c=t(2323);const g={class:"full-width row flex-center text-accent q-gutter-sm"};function u(e,a,t,n,l,r){const i=(0,o.up)("q-icon"),s=(0,o.up)("q-input"),u=(0,o.up)("q-table");return(0,o.wg)(),(0,o.j4)(u,{columns:t.cols,filter:n.filter,loading:n.loading,"rows-per-page-options":[5,8,10],rows:n.movimientos,title:t.tittle,onRequest:n.onRequest,"card-class":"bg-red-1 text-grey-9",class:"q-mt-xl",color:"primary","row-key":"id","rows-per-page-label":"Filas por página",pagination:n.pagination,"onUpdate:pagination":a[1]||(a[1]=e=>n.pagination=e),"binary-state-sort":""},{"top-right":(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:n.filter,"onUpdate:modelValue":a[0]||(a[0]=e=>n.filter=e),rounded:"",outlined:"",debounce:"300",placeholder:"buscador","bg-color":"white"},{append:(0,o.w5)((()=>[(0,o.Wm)(i,{name:"las la-search"})])),_:1},8,["modelValue"])])),"no-data":(0,o.w5)((({message:e,filter:a})=>[(0,o._)("div",g,[(0,o.Wm)(i,{size:"2em",name:"las la-meh"}),(0,o._)("span",null," Lamentablemente... "+(0,c.zw)(e),1),(0,o.Wm)(i,{size:"2em",name:a?"las la-frown":"las la-exclamation-triangle"},null,8,["name"])])])),_:1},8,["columns","filter","loading","rows","title","onRequest","pagination"])}t(71);const p={props:{tittle:String,cols:Array},setup(e){const a=(0,o.f3)("movimientoArray"),t=(0,i.iH)({}),n=(0,i.iH)(""),l=(0,i.iH)(!1),r=(0,i.iH)({page:1,sortBy:"Fecha",rowsPerPage:1,rowsNumber:1}),c=async(e=0)=>{try{let e;const a={headers:{"x-token":localStorage.token},params:{pageSize:5}};await s.api.get("/movimientos",a).then((e=>{const{meta:a,rows:t}=e.data;console.log(a),r.value.page=a.currentPage,r.value.rowsPerPage=a.pageSize,r.value.rowsNumber=a.count})).catch((e=>console.log(e.response)));return e}catch(a){console.log("Error en get",a)}};c();const g=async(e=0,t=5,o,n,i)=>{try{const c={headers:{"x-token":localStorage.token},params:{currentPage:e,pageSize:t}},g={headers:{"x-token":localStorage.token},params:{currentPage:e,pageSize:t,filter:o}},u={headers:{"x-token":localStorage.token},params:{currentPage:e,pageSize:t,sorter:n,desc:i}};let p;p=""!==o?await s.api.get("/movimientos",g):n?await s.api.get("/movimientos",u):await s.api.get("/movimientos",c);const{currentPage:m,pageSize:d,count:v}=p.data.meta,w=p.data.rows;a.value.splice(0,v,...w),r.value.page=m,r.value.rowsPerPage=d,r.value.rowsNumber=v,r.value.sortBy=n,r.value.descending=i,setInterval((()=>{l.value=!1}),1e3)}catch(c){console.log(c)}};function u(e){l.value=!0;let a=e.filter.toUpperCase();g(e.pagination.page,e.pagination.rowsPerPage,a,e.pagination.sortBy,e.pagination.descending)}return{movimientos:a,filter:n,loading:l,objeto:t,onRequest:u,pagination:r}}};var m=t(4260),d=t(6429),v=t(4842),w=t(4554),f=t(7518),h=t.n(f);const b=(0,m.Z)(p,[["render",u]]),y=b;h()(p,"components",{QTable:d.Z,QInput:v.Z,QIcon:w.Z});const P=[{name:"nSerie",label:"Serie de producto",field:e=>e.Producto.nSerie,align:"left"},{name:"local_original",label:"Original",field:"local_original",align:"left"},{name:"local_nuevo",label:"Nuevo",field:"local_nuevo",align:"left"},{name:"fecha",label:"Fecha de actualización",field:"fecha",align:"left",sortable:!0}],S={components:{tabla:y},data(){const e=(0,i.iH)(!1);(0,o.JJ)("isVisibleAgregar",e);const a=(0,i.iH)([]),t=async(e=1)=>{try{const t={headers:{"x-token":localStorage.token},params:{pageSize:5,currentPage:e}};await s.api.get("/movimientos",t).then((e=>{const{meta:t,rows:o}=e.data;a.value=o})).catch((e=>console.log(e.response)))}catch(t){console.log("Error en get",t)}};return t(),(0,o.JJ)("movimientoArray",a),{cols:P,movimientoArray:a,isVisibleAgregar:e}}};var k=t(4379);const _=(0,m.Z)(S,[["render",r]]),q=_;h()(S,"components",{QPage:k.Z})}}]);